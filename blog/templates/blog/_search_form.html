<div class="card mb-4 shadow-sm">
    <div class="card-header" style="background-color:#6F5643; color:#fff; font-weight:600;">
        Search Posts
    </div>
    <div class="card-body">
        {% comment %} <form method="get" action="{% url 'post_search' %}" id="post-search-form">
            <div class="input-group">
                <input type="search" name="q" id="search-input"
                       class="form-control"
                       placeholder="Search by title..."
                       value="{{ request.GET.q|default:'' }}">
                <button class="btn btn-primary" type="submit">Go</button>
            </div>
        </form> {% endcomment %}
<form method="get" action="{% url 'post_search' %}" id="post-search-form">
    {% if selected_category %}
        <input type="hidden" name="category" value="{{ selected_category.slug }}">
    {% endif %}
    <div class="input-group">
        <input type="search" name="q" id="search-input"
               class="form-control"
               placeholder="Search by title..."
               value="{{ query }}">
        <button class="btn btn-primary" type="submit">Go</button>
    </div>
</form>



    </div>
</div>

<script>
    // Optional: reset page when clearing input
    const searchInput = document.getElementById('search-input');
    const searchForm = document.getElementById('post-search-form');

    searchInput.addEventListener('input', () => {
        // If cleared, submit empty form to reset search
        if (!searchInput.value) {
            searchForm.submit();
        }
    });
</script> 
