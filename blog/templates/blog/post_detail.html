{% extends "base.html" %}

{% block page_title %}
<div class="text-center my-5">
    <h1 class="display-4 fw-bold" style="color: #73BDAB;">{{ post.title }}</h1>
</div>
{% endblock page_title %}

{% block content %}
<div class="row">
    <!-- Sidebar -->
    <div class="col-md-3 mb-4">
        <!-- TOC -->
        {% comment %} <div class="card mb-4 shadow-sm">
            <div class="card-header" style="background-color:#CC6B49; color:#fff; font-weight:600;">
                Table of Contents
            </div>
            <div id="toc" class="p-3 bg-light border rounded">No Table of Contents available</div>
        </div> {% endcomment %}


   <div class="card mb-4 shadow-sm">
    <div class="card-header" style="background-color:#CC6B49; color:#fff; font-weight:600;">
        Table of Contents
    </div>
    <div id="toc" class="p-3 bg-light border rounded" style="background-color: #F5F0E6 !important;">
        {% if toc_headings %}
            <ul class="mb-0" style="list-style-type:none; padding-left:0;">
                {% for h in toc_headings %}
                    <li style="padding-left:{% if h.level == 'h3' %}25px{% else %}0{% endif %}; line-height:1.4; margin-bottom:4px; display:flex; align-items:top;">
                        <span style="color:#CC6B49; font-size:0.8em; margin-right:8px;">
                            {% if h.level == 'h2' %}‚óè{% else %}‚óã{% endif %}
                        </span>
                        <a href="#{{ h.id }}" style="text-decoration:none; color:#6F5643; transition:all 0.2s;">
                            {{ h.text }}
                        </a>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-muted mb-0" >No Table of Contents available.</p>
        {% endif %}
    </div>
</div> 

        <!-- Posts -->
        <div class="card my-4 shadow-sm">
            <div class="card-header" style="background-color:#948c3c; color:#fff; font-weight:600;">
                Post Links
            </div>
            <ul class="list-group list-group-flush">

                     {% for link in post.links.all %}
                        <li class="list-group-item" style="color: #6F5643;background-color: #F5F0E6;">
                            <strong>{{ link.get_link_type_display }}:</strong>
                            <a href="{{ link.url }}" target="_blank" rel="noopener">{{ link.title }}</a>
                        </li>
                        {% empty %}
                        <li class="list-group-item text-muted">No Post Links Yet.</li>
                        {% endfor %}




            </ul>
        </div>

    </div>

    <!-- Main Post -->
    <div class="col-md-9">
        <div class="card shadow-sm border-0 mb-4" >
          <img 
    src="{% if post.cover %}{{ post.cover.url }}{% else %}/static/images/default_post.png{% endif %}" 
    class="card-img-top" 
    alt="{{ post.cover_alt|default:post.title }}" 
    style="object-fit: cover; max-height: 600px;"
>



<!-- Improved H1 -->
<h1 class="post-title mx-3 mt-4">{{ post.title }}</h1>

           <div class="card-body">
                {% comment %} <!-- Like Button -->
                <div class="d-flex align-items-center mb-3">
                    {% if user.is_authenticated %}
                        <button id="like-btn" class="btn btn-outline-dark d-flex align-items-center" data-slug="{{ project.slug }}">
                            {% if liked_by_user %}
                                ‚ù§Ô∏è
                            {% else %}
                                ü§ç
                            {% endif %}
                            <span id="like-count" class="ms-2">{{ project.likes_count }}</span>
                        </button>
                    {% else %}
                        <a href="{% url 'login' %}" class="btn btn-outline-dark d-flex align-items-center">
                            ü§ç <span class="ms-2">{{ project.likes_count }}</span>
                        </a>
                    {% endif %}
                    <span class="ms-2 text-muted">Likes</span>
                </div> {% endcomment %}

                <!-- Date on top -->
                {% comment %} <small class="text-muted d-block mb-1">
                    Created on: {{ project.created_on|date:"F j, Y" }}
                </small> {% endcomment %}

                <!-- Categories always below -->
                <small class="text-muted d-block mb-3">
                    {{ post.created_at|date:"F j, Y" }} | Categories:
                    {% if post.categories.all %}
                        {% for category in post.categories.all %}
                            <a href="{% url 'post_category' category.slug %}" class="category-chip">{{ category.name }}</a>
                        {% endfor %}
                    {% else %}
                        <span class="text-muted">Uncategorized</span>
                    {% endif %}
                </small>

                <!-- Categories, body, tags, links, related items (same as before) -->
                {% comment %} <small class="text-muted d-block mb-3">
                    Categories:
                    {% for category in project.categories.all %}
                        <a href="{% url 'project_category' category.slug %}" class="category-chip">{{ category.name }}</a>
                    {% endfor %}
                    | Created on: {{ project.created_on|date:"F j, Y" }}
                </small> {% endcomment %}
{% comment %} <div class="progress" style="height: 8px; border-radius: 4px;">
    <div class="progress-bar 
        {% if project.status == 'completed' %} bg-success
        {% elif project.status == 'in_progress' %} bg-warning
        {% else %} bg-secondary
        {% endif %}"
        role="progressbar"
        style="width: {% if project.status == 'completed' %}100{% else %}{{ project.progress_percent }}{% endif %}%;">
    </div>
</div> {% endcomment %}
{% comment %} <div class="progress progress-tiny" style="position: relative; height: 25px;">
    <div class="progress-bar 
        {% if post.status == 'completed' %} progress-filled
        {% elif post.status == 'in_progress' %} progress-partly
        {% else %} progress-empty
        {% endif %}"
        role="progressbar"
        style="width: {% if post.status == 'completed' %}100{% else %}{{ post.progress_percent }}{% endif %}%; position: relative;">
    </div>
    <!-- Status label centered over the bar -->
    <span style="position: absolute; width: 100%; text-align: center; font-weight: 600; color: #6F5643; line-height: 25px;">
        {% if post.status == 'completed' %}Completed
        {% elif post.status == 'in_progress' %}In Progress
        {% else %}Draft
        {% endif %}
    </span>
</div> {% endcomment %}


                <div class="card-text mt-3 post-body" style="color: #6F5643;">
                    {{ post.body|safe }}
                </div>
{% if post.tags.exists %}
    <div class="mt-3">
        <i class="bi bi-tags-fill me-1" style="color: #6F5643;"></i> 
        {% comment %} <strong>Tags:</strong> {% endcomment %}
        {% for tag in post.tags.all %}
            <a href="{% url 'post_tag' tag.slug %}" 
               class=" text-decoration-none me-1">
                #{{ tag.name }}
            </a>
        {% endfor %}
    </div>
{% endif %}

{% comment %} <button class="btn btn-like" data-entry-id="{{ project.id }}">
    ‚ù§Ô∏è <span class="like-count">{{ project.likes_count }}</span>
</button> {% endcomment %}

<button class="btn btn-like" data-entry-id="{{ post.id }}">
    {% if liked_by_user %}
        ‚ù§Ô∏è <span class="like-count">{{ post.likes_count }}</span>
    {% else %}
        ü§ç <span class="like-count">{{ post.likes_count }}</span>
    {% endif %}
</button>



<script>
document.querySelectorAll('.btn-like').forEach(button => {
    button.addEventListener('click', () => {
        const entryId = button.dataset.entryId;
        fetch(`/like/${entryId}/`)
            .then(response => response.json())
            .then(data => {
                button.innerText = `‚ù§Ô∏è ${data.likes}`;
            });
    });
});
</script>

{% comment %} <div class="mt-3 text-center">
   
    {% if user.is_authenticated %}
        <button id="like-btn" class="btn mb-2" style="background: #73BDAB; color: white;" data-slug="{{ project.slug }}">
            <span id="like-icon">{% if liked_by_user %}‚ù§Ô∏è{% else %}ü§ç{% endif %}</span>
            <span id="like-text" class="ms-2">{% if liked_by_user %}Liked{% else %}Like{% endif %}</span>
            <span id="like-count" class="ms-2">({{ project.likes_count }})</span>
        </button>
    {% else %}
        <a href="{% url 'account_login' %}" class="btn mb-2" style="background: #73BDAB; color: white;">
            ü§ç <span class="ms-2">Like</span> <span class="ms-2">({{ project.likes_count }})</span>
        </a>
    {% endif %}

   
    <p class="small text-muted mb-0">
        {% if liked_by_user %}
            Thanks for supporting this project! ‚ù§Ô∏è
        {% else %}
            Thanks for reading! If you enjoyed this project, give it a like ‚ù§Ô∏è.
        {% endif %}
    </p>
</div> {% endcomment %}



                {% comment %} {% if project.links.exists %}
                <div class="mt-4">
                    <h5>Project Links:</h5>
                    <ul class="list-group list-group-flush">
                        {% for link in project.links.all %}
                        <li class="list-group-item">
                            <strong>{{ link.get_link_type_display }}:</strong>
                            <a href="{{ link.url }}" target="_blank" rel="noopener">{{ link.title }}</a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %} {% endcomment %}

                {% if post.related_items.exists %}
                <div class="mt-4">
                    <h5>Related Posts & Tutorials:</h5>
                    <ul class="list-group list-group-flush">
                        {% for item in post.related_items.all %}
                            <li class="list-group-item">
                                <a href="{{ item.content_object.get_absolute_url }}">{{ item.content_object.title }}</a>
                                <small class="text-muted">({{ item.content_type.model }})</small>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
            </div>
        </div>
{% comment %} <h2>Required Materials</h2>
<ul>
  {% for entry_material in project.entrymaterial_set.all %}
    <li>
      {{ entry_material.material.name }}
      {% if entry_material.quantity %}- {{ entry_material.quantity }}{% endif %}
      {% if entry_material.notes %} ({{ entry_material.notes }}){% endif %}
    </li>
  {% empty %}
    <li>No materials listed for this project.</li>
  {% endfor %}
</ul> {% endcomment %}
{% comment %} <h2>Required Materials</h2>
<ul style="list-style: none; padding: 0;">
  {% for entry_material in project.entrymaterial_set.all %}
    <li style="display: flex; align-items: center; margin-bottom: 8px;">
      {% if entry_material.material.icon %}
        
             <img src="{{ entry_material.material.icon.url }}" alt="{{ entry_material.material.name }}"
     style="width:80px; height:80px; object-fit:contain; margin-right:10px;">

      {% endif %}
      <div>
        <strong>{{ entry_material.material.name }}</strong>
        {% if entry_material.quantity %} - {{ entry_material.quantity }}{% endif %}
        {% if entry_material.notes %} ({{ entry_material.notes }}){% endif %}
      </div>
    </li>
  {% empty %}
    <li>No materials listed for this project.</li>
  {% endfor %}
</ul> {% endcomment %}
<h2>Required Materials</h2>
<ul style="list-style: none; padding: 0;">
  {% for entry_material in post.entrymaterial_set.all %}
    <li style="display: flex; align-items: center; margin-bottom: 12px;">
      {% if entry_material.material.icon %}
        <a href="{{ entry_material.material.url }}" target="_blank">
          <img src="{{ entry_material.material.icon.url }}" alt="{{ entry_material.material.name }}"
               style="width:80px; height:80px; object-fit:contain; margin-right:10px;">
        </a>
      {% endif %}
      <div>
        <strong>{{ entry_material.material.name }}</strong>
        {% if entry_material.quantity %} - {{ entry_material.quantity }}{% endif %}
        {% if entry_material.notes %} ({{ entry_material.notes }}){% endif %}
        {% if entry_material.url %}
          <br>
          <a href="{{ entry_material.material.url }}" target="_blank" style="color:#007BFF; text-decoration:underline;">Buy</a>
        {% endif %}
      </div>
    </li>
  {% empty %}
    <li>No materials listed for this post.</li>
  {% endfor %}
</ul>


        <a href="{% url 'post_index' %}" class="btn btn-primary mb-5">‚Üê Back to Posts</a>
    </div>
</div>

<!-- AJAX script for like button -->
<script>

    // --- Like Button ---
document.addEventListener('DOMContentLoaded', function() {
 const likeBtn = document.getElementById('like-btn');
    if (!likeBtn) return;

    likeBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const slug = likeBtn.dataset.slug;

        fetch(`/posts/${slug}/like/`, {
            method: 'POST',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}',
                'Accept': 'application/json',
            },
        })
        .then(response => response.json())
        .then(data => {
            const icon = document.getElementById('like-icon');
            const text = document.getElementById('like-text');
            const count = document.getElementById('like-count');

            // Update icon
            icon.textContent = data.liked ? '‚ù§Ô∏è' : 'ü§ç';
            // Update text
            text.textContent = data.liked ? 'Liked' : 'Like';
            // Update count
            count.textContent = `(${data.likes_count})`;
        })
        .catch(err => console.error('Error:', err));
    });
    // --- Comment Elements ---
    const commentForm = document.getElementById('comment-form');
    const errorDiv = document.getElementById('comment-error');
    const commentsList = document.getElementById('comments-list');

    // --- Submit Comment ---
    if (commentForm) {
        commentForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const url = this.dataset.url;
            const content = this.querySelector('textarea[name="content"]').value.trim();
            const csrfToken = this.querySelector('[name=csrfmiddlewaretoken]').value;

            if (!content) return;

            fetch(url, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': csrfToken,
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: new URLSearchParams({ content })
            })
            .then(res => res.json())
            .then(data => {
                if (data.error) {
                    if (errorDiv) {
                        errorDiv.textContent = data.error;
                        errorDiv.classList.remove('d-none');
                    }
                } else {
                    if (errorDiv) errorDiv.classList.add('d-none');

                    commentsList.insertAdjacentHTML('afterbegin', data.comment_html);
                    commentForm.querySelector('textarea[name="content"]').value = '';
                }
            })
            .catch(err => console.error('Error:', err));
        });
    }

    // --- Delete Comment ---
    if (commentsList) {
        commentsList.addEventListener('click', function(e) {
            if (!e.target.classList.contains('delete-comment-btn')) return;

            const btn = e.target;
            const commentLi = btn.closest('.comment-card');
            const commentId = commentLi.dataset.commentId;
            const slug = btn.dataset.slug;

            if (!confirm('Are you sure you want to delete this comment?')) return;

            fetch(`/posts/${slug}/comment/delete/${commentId}/`, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}',
                    'Accept': 'application/json',
                },
            })
            .then(res => res.json())
            .then(data => {
                if (data.success) {
                    commentLi.remove();
                } else if (data.error) {
                    alert(data.error);
                }
            })
            .catch(err => console.error('Error:', err));
        });
    }
});
</script>


{% comment %} document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('comment-form');
    if (!form) return;

    form.addEventListener('submit', function(e) {
        e.preventDefault();
        const url = form.dataset.url;
        const csrfToken = form.querySelector('[name=csrfmiddlewaretoken]').value;
        const content = form.querySelector('[name=content]').value;

        fetch(url, {
            method: 'POST',
            headers: {
                'X-CSRFToken': csrfToken,
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: new URLSearchParams({content})
        })
        .then(response => response.json())
        .then(data => {
            if (data.error) {
                alert(data.error);
            } else {
                const commentsList = document.getElementById('comments-list');
                commentsList.innerHTML = `
                    <div class="border p-2 mb-2">
                        <strong>${data.user}</strong> <small class="text-muted">${data.created_at}</small>
                        <p>${data.content}</p>
                    </div>
                `;
            }
        })
        .catch(err => console.error(err));
    });
}); {% endcomment %}


{% endblock content %}


{% comment %} {% extends "base.html" %}

{% block page_title %}
<div class="text-center my-5">
    <h1 class="display-4 fw-bold" style="color: #73BDAB;">{{ project.title }}</h1>
</div>
{% endblock page_title %}

{% block page_content %}
<div class="row">
    <!-- Sidebar TOC -->
    <div class="col-md-3 mb-4">
        <div id="toc" class="p-3 bg-light border rounded"></div>
    </div>

    <!-- Main Post -->
    <div class="col-md-9">
        <div class="card shadow-sm border-0 mb-4" style="background-color: #ECE6C2;">
           {% if project.cover %}
            <img src="{{ project.cover.url }}" class="card-img-top" alt="{{ project.cover_alt|default:project.title }}" style="object-fit: cover; max-height: 600px;">
           {% endif %}
           <div class="card-body">
                <!-- Like Button -->
                <div class="d-flex align-items-center mb-3">
                    {% if user.is_authenticated %}
                        <form method="post" action="{% url 'project_like' project.slug %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-outline-dark d-flex align-items-center">
                            {% if liked_by_user %}
    ‚ù§Ô∏è
{% else %}
    ü§ç
{% endif %}

                                <span class="ms-2">{{ project.likes_count }}</span>
                            </button>
                        </form>
                    {% else %}
                        <a href="{% url 'login' %}" class="btn btn-outline-dark d-flex align-items-center">
                            ü§ç <span class="ms-2">{{ project.likes_count }}</span>
                        </a>
                    {% endif %}
                    <span class="ms-2 text-muted">Likes</span>
                </div>

                <small class="text-muted d-block mb-3">
                    Categories:
                    {% for category in project.categories.all %}
                        <a href="{% url 'project_category' category.slug %}" class="category-chip">{{ category.name }}</a>
                    {% endfor %}
                    | Created on: {{ project.created_on|date:"F j, Y" }}
                </small>

                {% if project.status == 'in_progress' %}
                <div class="progress mb-3" style="height: 6px;">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: {{ project.progress_percent }}%;" aria-valuenow="{{ project.progress_percent }}" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                {% endif %}

                <span class="badge 
                    {% if project.status == 'completed' %} bg-success 
                    {% elif project.status == 'in_progress' %} bg-warning text-dark 
                    {% else %} bg-secondary {% endif %}">
                    {{ project.get_status_display }}
                </span>

                <!-- Project Body -->
                <div class="card-text mt-3 post-body" style="color: #6F5643;">
                    {{ project.body|safe }}
                </div>

                <!-- Tags -->
                {% if project.tags.exists %}
                <div class="mt-3">
                    <strong>Tags:</strong>
                    {% for tag in project.tags.all %}
                        <a href="{% url 'project_tag' tag.slug %}" class="badge bg-secondary text-decoration-none">{{ tag.name }}</a>
                    {% endfor %}
                </div> 
                {% endif %}

                <!-- Project Links -->
                {% if project.links.exists %}
                <div class="mt-4">
                    <h5>Project Links:</h5>
                    <ul class="list-group list-group-flush">
                        {% for link in project.links.all %}
                        <li class="list-group-item">
                            <strong>{{ link.get_link_type_display }}:</strong>
                            <a href="{{ link.url }}" target="_blank" rel="noopener">{{ link.title }}</a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}

                <!-- Related Posts / Tutorials -->
                {% if project.related_items.exists %}
                <div class="mt-4">
                    <h5>Related Posts & Tutorials:</h5>
                    <ul class="list-group list-group-flush">
                        {% for item in project.related_items.all %}
                            <li class="list-group-item">
                                <a href="{{ item.content_object.get_absolute_url }}">{{ item.content_object.title }}</a>
                                <small class="text-muted">({{ item.content_type.model }})</small>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
            </div>
        </div>

        <a href="{% url 'project_index' %}" class="btn btn-primary mb-5">‚Üê Back to Projects</a>
    </div>
</div>
{% endblock page_content %} {% endcomment %}


{% comment %} {% extends "base.html" %}

{% block page_title %}
<div class="text-center my-5">
    <h1 class="display-4 fw-bold" style="color: #73BDAB;">{{ project.title }}</h1>
</div>
{% endblock page_title %}

{% block page_content %}
<div class="row">
    <!-- Sidebar TOC -->
    <div class="col-md-3 mb-4">
        <div id="toc" class="p-3 bg-light border rounded"></div>
    </div>

    <!-- Main Post -->
    <div class="col-md-9">
        <div class="card shadow-sm border-0 mb-4" style="background-color: #ECE6C2;">
           {% if project.cover %}
            <img src="{{ project.cover.url }}" class="card-img-top" alt="{{ project.cover_alt|default:project.title }}" style="object-fit: cover; max-height: 600px;">
            <!-- Improved H1 -->
            <h1 class="project-title mx-3 my-4">{{ project.title }}</h1>
            {% endif %}
            <div class="card-body">
                <small class="text-muted d-block mb-3">
                    Categories:
                    {% for category in project.categories.all %}
                        <a href="{% url 'project_category' category.slug %}" class="category-chip">{{ category.name }}</a>
                    {% endfor %}
                    | Created on: {{ project.created_on|date:"F j, Y" }}
                </small>

                {% if project.status == 'in_progress' %}
                <div class="progress mb-3" style="height: 6px;">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: {{ project.progress_percent }}%;" aria-valuenow="{{ project.progress_percent }}" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                {% endif %}

                <span class="badge 
                    {% if project.status == 'completed' %} bg-success 
                    {% elif project.status == 'in_progress' %} bg-warning text-dark 
                    {% else %} bg-secondary {% endif %}">
                    {{ project.get_status_display }}
                </span>

                <!-- Project Body -->
                <div class="card-text mt-3 post-body" style="color: #6F5643;">
                    {{ project.body|safe }}
                </div>

                <!-- Tags -->
           {% if project.tags.exists %}
           
                <div class="mt-3">
                    <strong>Tags:</strong>
                    {% for tag in project.tags.all %}
                        <a href="{% url 'project_tag' tag.slug %}" class="badge bg-secondary text-decoration-none">{{ tag.name }}</a>
                    {% endfor %}
                </div> 
                {% endif %}

                <!-- Project Links -->
                {% if project.links.exists %}
                <div class="mt-4">
                    <h5>Project Links:</h5>
                    <ul class="list-group list-group-flush">
                        {% for link in project.links.all %}
                        <li class="list-group-item">
                            <strong>{{ link.get_link_type_display }}:</strong>
                            <a href="{{ link.url }}" target="_blank" rel="noopener">{{ link.title }}</a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}

                <!-- Related Posts / Tutorials -->
                {% if project.related_items.exists %}
                <div class="mt-4">
                    <h5>Related Posts & Tutorials:</h5>
                    <ul class="list-group list-group-flush">
                        {% for item in project.related_items.all %}
                            <li class="list-group-item">
                                <a href="{{ item.content_object.get_absolute_url }}">{{ item.content_object.title }}</a>
                                <small class="text-muted">({{ item.content_type.model }})</small>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
            </div>
        </div>

        <a href="{% url 'project_index' %}" class="btn btn-primary mb-5">‚Üê Back to Projects</a>
    </div>
</div>


{% endblock page_content %}


{% comment %} {% extends "base.html" %}
{% block title %}{{ project.title }} ‚Äî My Blog{% endblock %}

{% block content %}
<div class="row">
  <div class="col-lg-8">
    <article class="article">
      <header class="mb-3">
        <h1 class="mb-1">{{ project.title }}</h1>
        <div class="project-meta mb-2">
          {% if project.author %}By {{ project.author.get_full_name|default:project.author.username }} ‚Ä¢ {% endif %}
          {{ project.created_at|date:"F j, Y" }} ‚Ä¢ {{ project.reading_time }} min read
          {% if project.is_featured %} ‚Ä¢ <span class="badge bg-primary">Featured</span>{% endif %}
        </div>
        {% if project.cover %}
          <img src="{{ project.cover.url }}" alt="{{ project.cover_alt }}" class="mb-3 cover-img">
        {% endif %}
      </header>

      <div id="project-content">
        {{ project.body|safe }}
      </div>

      <footer class="mt-4">
        <div class="mb-2 small">
          {% for cat in project.categories.all %}
            <a class="badge bg-light text-decoration-none">{{ cat.name }}</a>
          {% endfor %}
          {% for tag in project.tags.all %}
            <a class="badge bg-secondary text-white text-decoration-none">{{ tag.name }}</a>
          {% endfor %}
        </div>
      </footer>
    </article>
  </div>

<aside class="col-lg-4">
  {% if toc_headings %}
    <div class="toc" id="toc">
      <h6>Table of Contents</h6>
      <ul class="list-unstyled">
        {% for heading in toc_headings %}
          <li class="{% if heading.level == 'h3' %}ms-3{% endif %}">
            <a href="#{{ heading.id }}">{{ heading.text }}</a>
          </li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  <div class="mt-4">
    <h6>Links</h6>
    <ul class="small">
      {% for link in project.links.all %}
        <li>
          <a target="_blank" rel="noopener" href="{{ link.url }}">
            {% if link.icon %}<i class="{{ link.icon }}"></i>{% endif %} {{ link.title }}
          </a>
        </li>
      {% empty %}
        <li class="text-muted">No links</li>
      {% endfor %}
    </ul>
  </div>
</aside>

</div>
{% endblock %} {% endcomment %}
