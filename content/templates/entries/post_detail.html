{% extends "base.html" %}
{% block title %}{{ post.title }} — My Blog{% endblock %}

{% block content %}
<div class="row">
  <div class="col-lg-8">
    <article class="article">
      <header class="mb-3">
        <h1 class="mb-1">{{ post.title }}</h1>
        <div class="post-meta mb-2">
          {% if post.author %}By {{ post.author.get_full_name|default:post.author.username }} • {% endif %}
          {{ post.created_at|date:"F j, Y" }} • {{ post.reading_time }} min read
          {% if post.is_featured %} • <span class="badge bg-primary">Featured</span>{% endif %}
        </div>
        {% if post.cover %}
          <img src="{{ post.cover.url }}" alt="{{ post.cover_alt }}" class="mb-3 cover-img">
        {% endif %}
      </header>

      <div id="post-content">
        {{ post.body|safe }}
      </div>

      <footer class="mt-4">
        <div class="mb-2 small">
          {% for cat in post.categories.all %}
            <a class="badge bg-light text-decoration-none">{{ cat.name }}</a>
          {% endfor %}
          {% for tag in post.tags.all %}
            <a class="badge bg-secondary text-white text-decoration-none">{{ tag.name }}</a>
          {% endfor %}
        </div>
      </footer>
    </article>
  </div>

<aside class="col-lg-4">
  {% if toc_headings %}
    <div class="toc" id="toc">
      <h6>Table of Contents</h6>
      <ul class="list-unstyled">
        {% for heading in toc_headings %}
          <li class="{% if heading.level == 'h3' %}ms-3{% endif %}">
            <a href="#{{ heading.id }}">{{ heading.text }}</a>
          </li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  <div class="mt-4">
    <h6>Links</h6>
    <ul class="small">
      {% for link in post.links.all %}
        <li>
          <a target="_blank" rel="noopener" href="{{ link.url }}">
            {% if link.icon %}<i class="{{ link.icon }}"></i>{% endif %} {{ link.title }}
          </a>
        </li>
      {% empty %}
        <li class="text-muted">No links</li>
      {% endfor %}
    </ul>
  </div>
</aside>

</div>
{% endblock %}
