{% extends "base.html" %}



{% block content %}
<div class="row">
    <!-- Main content -->
    {% include "projects/_project_list.html" %}
    <!-- Sidebar -->
    {% include "projects/_sidebar.html" %}
</div>
{% endblock content %}


{% comment %} {% extends "base.html" %}
{% block title %}Projects — My Blog{% endblock %}

{% block content %}
<div class="row">
  <div class="col-md-8">
    <h1 class="mb-4">Projects</h1>

    {% for project in projects %}
      <article class="mb-4 pb-3 border-bottom">
        <div class="row g-3">
          {% if project.cover %}
            <div class="col-4">
              <a href="{% url 'project_detail' slug=project.slug %}">
                <img src="{{ project.cover.url }}" alt="{{ project.cover_alt }}" class="img-fluid rounded cover-img">
              </a>
            </div>
            <div class="col-8">
          {% else %}
            <div class="col-12">
          {% endif %}
              <h2 class="h5 mb-1">
                <a href="{% url 'project_detail' slug=project.slug %}">{{ project.title }}</a>
              </h2>

              <div class="mb-2 text-muted small">
                {% if project.author %}By {{ project.author.get_full_name|default:project.author.username }} • {% endif %}
                {{ project.created_at|date:"M j, Y" }} • {{ project.reading_time }} min read
                {% if project.is_featured %} • <span class="badge bg-primary">Featured</span>{% endif %}
              </div>

              <p class="mb-1">{{ project.excerpt }}</p>

              <div class="small">
                {% for cat in project.categories.all %}
                  <a href="#" class="badge bg-light text-decoration-none">{{ cat.name }}</a>
                {% endfor %}
                {% for tag in project.tags.all %}
                  <a href="#" class="badge bg-secondary text-white text-decoration-none">{{ tag.name }}</a>
                {% endfor %}
              </div>
            </div>
        </div>
      </article>
    {% empty %}
      <p>No projects found.</p>
    {% endfor %}

    <!-- pagination -->
    <nav aria-label="Projects pagination">
      <ul class="pagination">
        {% if page_obj.has_previous %}
          <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">Previous</a></li>
        {% else %}
          <li class="page-item disabled"><span class="page-link">Previous</span></li>
        {% endif %}

        {% for num in paginator.page_range %}
          {% if page_obj.number == num %}
            <li class="page-item active"><span class="page-link">{{ num }}</span></li>
          {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
            <li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
          {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
          <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">Next</a></li>
        {% else %}
          <li class="page-item disabled"><span class="page-link">Next</span></li>
        {% endif %}
      </ul>
    </nav>
  </div>

  <aside class="col-md-4">
    <div class="mb-4">
      <h5>About</h5>
      <p class="small text-muted">A short blog about hardware, software and projects.</p>
    </div>

    <div class="mb-4">
      <h6>Recent</h6>
      <ul class="list-unstyled small">
        {% for r in projects|slice:":5" %}
          <li><a href="{% url 'project_detail' slug=r.slug %}">{{ r.title }}</a></li>
        {% endfor %}
      </ul>
    </div>
  </aside>
</div>
{% endblock %} {% endcomment %}
