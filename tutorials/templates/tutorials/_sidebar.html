<div class="col-md-3">

  <!-- Search form -->
  {% include "tutorials/_search_form.html" %}

  <!-- Categories -->
  <div class="card mb-4 shadow-sm">
    <div class="card-header" style="background-color:#73BDAB; color:#fff; font-weight:600;">
      Categories
    </div>
    <ul class="list-group list-group-flush">
      {% for category in all_categories %}
        {% if category.slug %}
        <li class="list-group-item {% if category == current_category %}active-category{% endif %}">
          <a href="{% url 'tutorial_category' category.slug %}" 
             class="{% if category == current_category %}fw-bold{% endif %}">
             {{ category.name }}
          </a>
        </li>
        {% endif %}
      {% empty %}
        <li class="list-group-item text-muted">No categories yet.</li>
      {% endfor %}
    </ul>
  </div>

  <!-- Tags -->
  <div class="card shadow-sm">
    <div class="card-header" style="background-color:#CC6B49; color:#fff; font-weight:600;">
      {% if current_category %}
        Tags in {{ current_category.name }}
      {% else %}
        Tags
      {% endif %}
    </div>
    <div class="card-body">
      {% if current_category %}
        {% for tag in category_tags %}
          <a href="{% url 'tutorial_category_tag' current_category.slug tag.slug %}" 
             class="badge m-1 text-decoration-none
                    {% if tag == current_tag %}
                      active-tag
                    {% else %}
                      bg-secondary
                    {% endif %}">
            #{{ tag.name }}
          </a>
        {% empty %}
          <span class="text-muted">No tags for this category.</span>
        {% endfor %}
      {% else %}
        <span class="text-muted">Select a category to view tags.</span>
      {% endif %}
    </div>
  </div>

</div>


{% comment %} <!-- projects/_sidebar.html -->
<div class="col-md-3">

    <!-- Search form -->
    {% include "projects/_search_form.html" %}

    <!-- Categories -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header" style="background-color:#73BDAB; color:#fff; font-weight:600;">
            Categories
        </div>
        <ul class="list-group list-group-flush">
            {% for category in all_categories %}
                {% if category.slug %}
                <li class="list-group-item {% if category == current_category %}active-category{% endif %}">
                    <a href="{% url 'project_category' category.slug %}" 
                       class="{% if category == current_category %}fw-bold{% endif %}">
                       {{ category.name }}
                    </a>
                </li>
                {% endif %}
            {% empty %}
                <li class="list-group-item text-muted">No categories yet.</li>
            {% endfor %}
        </ul>
    </div>

    <!-- Tags -->
    <div class="card shadow-sm">
        {% comment %} <div class="card-header" style="background-color:#CC6B49; color:#fff; font-weight:600;">
            Tags
        </div> {% endcomment %}
  {% comment %}      <div class="card-header" style="background-color:#CC6B49; color:#fff; font-weight:600;">
    {% if current_category %}
        Tags in {{ current_category.name }}
    {% else %}
        Tags
    {% endif %}
</div>

        <div class="card-body">
            {% if category_tags %}
                {% for tag in category_tags %}
                    <a href="{% url 'project_tag' tag.slug %}" 
                       class="badge m-1 text-decoration-none
                              {% if tag == current_tag %}
                                active-tag
                              {% else %}
                                bg-secondary
                              {% endif %}">
                        #{{ tag.name }}
                    </a>
                {% empty %}
                    <span class="text-muted">No tags for this category.</span>
                {% endfor %}
            {% else %}
                {% for tag in all_tags %}
                    <a href="{% url 'tutorial_tag' tag.slug %}" 
                       class="badge m-1 text-decoration-none
                              {% if tag == current_tag %}
                                active-tag
                              {% else %}
                                bg-secondary
                              {% endif %}">
                        #{{ tag.name }}
                    </a>
                {% empty %}
                    <span class="text-muted">No tags available.</span>
                {% endfor %}
            {% endif %}
        </div>
    </div>

</div> {% endcomment %}

{% comment %} <div class="col-md-3">
    <!-- Categories -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header" style="background-color:#73BDAB; color:#fff; font-weight:600;">
            Categories
        </div>
        <ul class="list-group list-group-flush" style="background-color: red !important;">
            {% for category in all_categories %}
            <li class="list-group-item {% if category == current_category %}active{% endif %}">
                {% if current_tag %}
                    <!-- Combined category + tag URL -->
                    <a href="{% url 'projects_by_category_and_tag' category.slug current_tag.slug %}"
                       class="{% if category == current_category %}text-white{% endif %}">
                        {{ category.name }}
                    </a>
                {% else %}
                    <!-- Category-only URL -->
                    <a href="{% url 'project_category' category.slug %}"
                       class="{% if category == current_category %}text-white{% endif %}">
                        {{ category.name }}
                    </a>
                {% endif %}
            </li>
            {% empty %}
            <li class="list-group-item text-muted">No categories yet.</li>
            {% endfor %}
        </ul>
    </div>

    <!-- Tags -->
    <div class="card shadow-sm">
        <div class="card-header" style="background-color:#CC6B49; color:#fff; font-weight:600;">
            {% if current_category %}
                Tags in {{ current_category.name }}
            {% elif current_tag %}
                Tags related to #{{ current_tag.name }}
            {% else %}
                Tags
            {% endif %}
        </div>
        <div class="card-body">
            {% for tag in all_tags %}
                {% if current_category %}
                    <!-- Combined category + tag URL -->
                    <a href="{% url 'projects_by_category_and_tag' current_category.slug tag.slug %}"
                       class="badge bg-secondary text-decoration-none m-1">
                        #{{ tag.name }}
                    </a>
                {% else %}
                    <!-- Tag-only URL -->
                    <a href="{% url 'project_tag' tag.slug %}" class="badge bg-secondary text-decoration-none m-1">
                        #{{ tag.name }}
                    </a>
                {% endif %}
            {% empty %}
                <p class="text-muted">No tags yet.</p>
            {% endfor %}
        </div>
    </div>
</div> {% endcomment %}